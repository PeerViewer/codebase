<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PeerViewer 1.0.0</title>
  </head>
  <body>
    <div class="container">
        <header>
           <h1>PeerViewer</h1>
           <p>The free peer-to-peer TeamViewer solution.</p>
        </header>
        <div class="main-content">
            <div class="column" id="column1">
                <h2>Allow Remote Control</h2>
                <button class="bluebutton" onclick="runServer()">Run Server</button>
		<p id="youridlabel">YOUR ID:</p>
                <div id="pubkey">Please wait, server starting up...</div>
            </div>
            <div class="column" id="column2">
                <h2>Control Remote Computer</h2>
                <label for="connectto">Partner ID:</label>
                <input type="text" id="connectto" name="connectto"/><br/>
                <button class="bluebutton" onclick="runClient()">CONNECT</button>
            </div>
        </div>
        <footer>
            <p>Footer</p>
        </footer>
    </div>
    <script>
        const { ipcRenderer } = require('electron');
        function runServer() {
          ipcRenderer.send('run-server');
          console.log("run-server done");
        }
        function runClient() {
          ipcRenderer.send('run-client', document.getElementById('connectto').value);
          console.log("run-client done");
        }
        // Listen for the response from the main process
        ipcRenderer.on('run-client-result', (event, result) => {
          console.log("got result:" + result);
        });
        ipcRenderer.on('run-server-result', (event, result) => {
          console.log("got result:" + result);
        });
        ipcRenderer.on('run-server-pubkey', (event, result) => {
          console.log("run-server-pubkey: " + result);
          document.getElementById("pubkey").innerHTML = result;
        });
    </script>
  </body>
</html>
